{"version":3,"sources":["../src/index.js"],"names":["mal_url","searchAnime","name","url","encodeURI","fetchData","then","data","categories","items","anime","cors_api_url","method","request","Request","fetch","response","status","Promise","reject","json","$","document","ready","length","$title","text","append"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,QAAMA,UAAU,0BAAhB;;AAEA,aAASC,WAAT,CAAqBC,IAArB,EAA2B;AACvB,YAAMC,yEAAwEC,UAAWF,IAAX,CAAxE,SAAN;AACA,eAAOG,UAAU,KAAV,EAAiBF,GAAjB,EAAsBG,IAAtB,CAA2B,gBAAQ;AAAA,kDAKlCC,IALkC,CAElCC,UAFkC;AAAA,2EAG9BC,KAH8B;AAAA,gBAGtBC,KAHsB;;AAOtC,gBAAI,CAACA,KAAL,EAAY;;AAEZ,mBAAOA,MAAMP,GAAb;AACH,SAVM,CAAP;AAWH;;AAED,QAAMQ,eAAe,sCAArB;;AAEA,QAAMN,YAAY,SAAZA,SAAY,CAACO,MAAD,EAAST,GAAT,EAAiB;AAC/B,YAAMU,UAAU,IAAIC,OAAJ,CAAYH,eAAeR,GAA3B,EAAgC;AAC5CS;AAD4C,SAAhC,CAAhB;AAGA,eAAOG,MAAMF,OAAN,EAAeP,IAAf,CAAoB,oBAAY;AACnC,gBAAIU,SAASC,MAAT,KAAoB,GAAxB,EAA6B,OAAOC,QAAQC,MAAR,CAAeH,QAAf,CAAP;AAC7B,mBAAOA,SAASI,IAAT,EAAP;AACH,SAHM,CAAP;AAIH,KARD;;AAUAC,MAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAM;AACpB,YAAI,CAACF,EAAE,kBAAF,EAAsBG,MAA3B,EAAmC;;AAEnC,YAAMC,SAASJ,EAAE,aAAF,CAAf;AACA,YAAMnB,OAAOmB,EAAE,kBAAF,EAAsBK,IAAtB,EAAb;AACAzB,oBAAYC,IAAZ,EAAkBI,IAAlB,CAAuB,eAAO;AAC1B,gBAAI,CAACH,GAAL,EAAU;;AAEVsB,mBAAOE,MAAP,gBAA2BxB,GAA3B;AACH,SAJD;AAKH,KAVD","file":"index.js","sourcesContent":["const mal_url = \"https://myanimelist.net/\";\n\nfunction searchAnime(name) {\n    const url = `https://myanimelist.net/search/prefix.json?type=anime&keyword=${ encodeURI( name ) }&v=1`;\n    return fetchData(\"GET\", url).then(data => {\n        const {\n            categories: [{\n                items: [anime],\n            }]\n        } = data;\n\n        if (!anime) return;\n\n        return anime.url;\n    });\n}\n\nconst cors_api_url = \"https://cors-anywhere.herokuapp.com/\";\n\nconst fetchData = (method, url) => {\n    const request = new Request(cors_api_url + url, {\n        method\n    });\n    return fetch(request).then(response => {\n        if (response.status !== 200) return Promise.reject(response);\n        return response.json();\n    });\n};\n\n$(document).ready(() => {\n    if (!$(\"#source_showview\").length) return;\n\n    const $title = $(\"h1.ellipsis\");\n    const name = $(\"h1.ellipsis span\").text();\n    searchAnime(name).then(url => {\n        if (!url) return;\n\n        $title.append(`<a href=\"${ url }\" style=\"vertical-align: middle;\"><img src=\"https://myanimelist.cdn-dena.com/images/faviconv5.ico\"></a>`);\n    });\n});"]}